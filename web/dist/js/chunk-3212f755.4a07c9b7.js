(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3212f755"],{"4aef":function(t,e,s){},"4f79":function(t,e,s){"use strict";var a=s("4aef"),i=s.n(a);i.a},"4ffd":function(t,e,s){t.exports=s.p+"img/logo.254fcf8c.png"},ac2a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg-white w-100 shadow"},[a("div",{staticClass:"w py-3 d-flex ai-center"},[a("router-link",{attrs:{to:"/"}},[a("img",{attrs:{src:s("4ffd"),alt:"",height:"40px"}})]),a("span",{staticClass:"mx-5 fs-xxl text-grey"},[t._v("|")]),a("span",{staticClass:"fs-xl text-grey"},[t._v("欢迎登录")])],1)]),a("div",{staticClass:"content"},[a("div",{staticClass:"w h-100 d-flex ai-center jc-end"},[a("div",{staticClass:"bg-white py-4 px-4 shadow-1",staticStyle:{width:"400px"}},[a("div",{staticClass:"d-flex jc-around fs-xl mt-4 text-grey"},[a("span",{staticClass:"cp",class:{active:t.loginStyle},on:{click:function(e){t.loginStyle=!0}}},[t._v("账号登录")]),a("span",{staticClass:"fs-xxl"},[t._v("|")]),a("span",{staticClass:"cp",class:{active:!t.loginStyle},on:{click:function(e){t.loginStyle=!1}}},[t._v("微信登录")])]),t.loginStyle?a("div",{staticClass:"w-100"},[a("div",{staticClass:"d-flex jc-center mt-5"},[a("el-form",{ref:"form",staticStyle:{width:"95%"},attrs:{rules:t.rules,model:t.form}},[a("el-form-item",{staticClass:"mb-4",attrs:{prop:"account"}},[a("el-input",{attrs:{size:"middle",placeholder:"请输入手机/邮箱/用户名","prefix-icon":"el-icon-user"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account","string"===typeof e?e.trim():e)},expression:"form.account"}})],1),a("el-form-item",{staticClass:"mb-4",attrs:{prop:"password"}},[a("el-input",{attrs:{size:"middle",placeholder:"请输入密码","prefix-icon":"el-icon-c-scale-to-original","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"===typeof e?e.trim():e)},expression:"form.password"}})],1)],1)],1),a("div",{staticClass:"d-flex jc-between ai-center"},[a("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("记住我")]),a("span",[t._v("短信验证码登录")])],1),a("div",[a("el-button",{staticClass:"w-100 mt-4",attrs:{type:"primary"},on:{click:function(e){return t.submit("form")}}},[t._v("登录")])],1),a("div",{staticClass:"d-flex jc-center my-4 fs-lg text-grey"},[a("span",{staticClass:"cp",on:{click:function(e){return t.$router.push("/register")}}},[t._v("立即注册")]),a("span",{staticClass:"px-2"},[t._v("|")]),a("span",{staticClass:"cp",on:{click:function(e){return t.$router.push("/forget")}}},[t._v("忘记密码")])])]):a("div",{staticClass:"d-flex jc-center py-5"},[a("img",{attrs:{src:s("4ffd"),width:"300px",alt:""}})])])])]),a("el-dialog",{staticStyle:{"min-width":"600px"},attrs:{title:"请进行安全验证",visible:t.dialogFormVisible,width:"20%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ver",staticClass:"d-flex ai-center",attrs:{model:t.verCode},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticStyle:{width:"40%",height:"60px","min-width":"120px"},domProps:{innerHTML:t._s(t.img)},on:{click:function(e){return t.fetchCaptcha()}}}),a("el-form-item",{staticClass:"m-0",attrs:{prop:"code","label-width":"20px",rules:[{required:!0,message:"请输入验证码",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.verCode.code,callback:function(e){t.$set(t.verCode,"code",e)},expression:"verCode.code"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.verification("ver")}}},[t._v("确 定")])],1)],1)],1)},i=[],o={name:"Login",data:function(){return{img:"",loginStyle:!0,checked:!0,form:{account:"",password:""},rules:{account:[{required:!0,message:"请输入账户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},verCode:{code:""},dialogFormVisible:!1}},components:{},computed:{},methods:{fetchCaptcha:function(){var t=this;this.axios({method:"get",url:"/account/fetchCaptcha"}).then((function(e){e.data.success&&(t.img=e.data.data)}))},submit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.dialogFormVisible=!0,e.fetchCaptcha()}))},verification:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.axios({method:"post",url:"/account/varCode",data:{code:e.verCode.code}}).then((function(t){t.data.success?(e.dialogFormVisible=!1,e.login()):(e.verCode.code="",e.$message.error(t.data.message),e.fetchCaptcha())}))}))},login:function(){var t=this;this.axios({method:"post",url:"/account/login",data:this.form}).then((function(e){e.data.success?(t.$message.success(e.data.message),localStorage.token=e.data.token,localStorage.userName=e.data.userInfo.user_name,t.$router.push("/")):t.$message.success(e.data.message)}))}}},c=o,r=(s("4f79"),s("2877")),n=Object(r["a"])(c,a,i,!1,null,"1551f8ad",null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-3212f755.4a07c9b7.js.map